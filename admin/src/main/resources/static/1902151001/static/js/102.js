webpackJsonp([102],{cEME:function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o={data:function(){return{loading:!1,commodityOptions:[],visible:!1,dataForm:{groupActivityId:0,commodityId:"",groupStartTime:"",groupEndTime:"",groupPrice:"",groupTotalNumber:"",hasGroupNumber:"",stayGroupNumber:"",state:"",createTime:"",storeId:""},dataRule:{commodityId:[{required:!0,message:"商品id不能为空",trigger:"blur"}],groupStartTime:[{required:!0,message:"拼团开始时间不能为空",trigger:"blur"}],groupEndTime:[{required:!0,message:"拼团结束时间不能为空",trigger:"blur"}],groupPrice:[{required:!0,message:"拼团价不能为空",trigger:"blur"}],groupTotalNumber:[{required:!0,message:"拼团总人数不能为空",trigger:"blur"}],hasGroupNumber:[{required:!0,message:"已拼团人数不能为空",trigger:"blur"}],stayGroupNumber:[{required:!0,message:"待拼团人数不能为空",trigger:"blur"}],state:[{required:!0,message:"状态不能为空",trigger:"blur"}],createTime:[{required:!0,message:"创建时间不能为空",trigger:"blur"}],storeId:[{required:!0,message:"店铺id不能为空",trigger:"blur"}]}}},methods:{commodityList:function(t){var r=this;this.$http({url:this.$http.adornUrl("/cellar/cellarcommoditydb/list"),method:"get",params:this.$http.adornParams({key:t,categoryType:"1"})}).then(function(t){var e=t.data;e&&0===e.code?r.commodityOptions=e.page.list:r.$message.error(e.msg)})},changeCommodity:function(t){this.dataForm.commodityId=t;var r;r=this.commodityOptions.find(function(r){return r.commodityId===t}),this.dataForm.storeId=r.storeId},remoteMethod:function(t){var r=this;""!==t?(this.loading=!0,setTimeout(function(){r.loading=!1,r.commodityList(t)},200)):this.commodityList("")},init:function(t){var r=this;this.commodityList(),this.dataForm.groupActivityId=t||0,this.visible=!0,this.$nextTick(function(){r.$refs.dataForm.resetFields(),r.dataForm.groupActivityId&&r.$http({url:r.$http.adornUrl("/cellar/cellargroupactivitydb/info/"+r.dataForm.groupActivityId),method:"get",params:r.$http.adornParams()}).then(function(t){var e=t.data;e&&0===e.code&&(r.dataForm.commodityId=e.cellarGroupActivityDb.commodityId,r.dataForm.groupStartTime=e.cellarGroupActivityDb.groupStartTime,r.dataForm.groupEndTime=e.cellarGroupActivityDb.groupEndTime,r.dataForm.groupPrice=e.cellarGroupActivityDb.groupPrice,r.dataForm.groupTotalNumber=e.cellarGroupActivityDb.groupTotalNumber,r.dataForm.hasGroupNumber=e.cellarGroupActivityDb.hasGroupNumber,r.dataForm.stayGroupNumber=e.cellarGroupActivityDb.stayGroupNumber,r.dataForm.state=e.cellarGroupActivityDb.state,r.dataForm.createTime=e.cellarGroupActivityDb.createTime,r.dataForm.storeId=e.cellarGroupActivityDb.storeId)})})},dataFormSubmit:function(){var t=this;this.$refs.dataForm.validate(function(r){r&&t.$http({url:t.$http.adornUrl("/cellar/cellargroupactivitydb/"+(t.dataForm.groupActivityId?"update":"save")),method:"post",data:t.$http.adornData({groupActivityId:t.dataForm.groupActivityId||void 0,commodityId:t.dataForm.commodityId,groupStartTime:t.dataForm.groupStartTime,groupEndTime:t.dataForm.groupEndTime,groupPrice:t.dataForm.groupPrice,groupTotalNumber:t.dataForm.groupTotalNumber,hasGroupNumber:t.dataForm.hasGroupNumber,stayGroupNumber:t.dataForm.stayGroupNumber,state:t.dataForm.state,createTime:t.dataForm.createTime,storeId:t.dataForm.storeId})}).then(function(r){var e=r.data;e&&0===e.code?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.visible=!1,t.$emit("refreshDataList")}}):t.$message.error(e.msg)})})}}},a={render:function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("el-dialog",{attrs:{title:t.dataForm.id?"修改":"新增","close-on-click-modal":!1,visible:t.visible},on:{"update:visible":function(r){t.visible=r}}},[e("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"label-width":"120px"},nativeOn:{keyup:function(r){if(!("button"in r)&&t._k(r.keyCode,"enter",13,r.key))return null;t.dataFormSubmit()}}},[e("el-form-item",{attrs:{label:"商品",prop:"commodityId"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{remote:"",clearable:"",filterable:"","reserve-keyword":"","remote-method":t.remoteMethod,loading:t.loading,placeholder:"请选择"},on:{change:t.changeCommodity},model:{value:t.dataForm.commodityId,callback:function(r){t.$set(t.dataForm,"commodityId",r)},expression:"dataForm.commodityId"}},t._l(t.commodityOptions,function(r){return e("el-option",{key:r.commodityId,attrs:{label:r.commodityName,value:r.commodityId}},[e("span",{staticStyle:{float:"left"}},[t._v(t._s(r.commodityName))]),t._v(" "),e("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(r.storeName))])])}))],1),t._v(" "),e("el-form-item",{attrs:{label:"拼团开始时间",prop:"groupStartTime"}},[e("div",{staticClass:"block"},[e("el-date-picker",{attrs:{type:"datetime","default-time":"12:00:00","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"拼团开始时间"},model:{value:t.dataForm.groupStartTime,callback:function(r){t.$set(t.dataForm,"groupStartTime",r)},expression:"dataForm.groupStartTime"}})],1)]),t._v(" "),e("el-form-item",{attrs:{label:"拼团结束时间",prop:"groupEndTime"}},[e("div",{staticClass:"block"},[e("el-date-picker",{attrs:{type:"datetime","default-time":"12:00:00","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"拼团结束时间"},model:{value:t.dataForm.groupEndTime,callback:function(r){t.$set(t.dataForm,"groupEndTime",r)},expression:"dataForm.groupEndTime"}})],1)]),t._v(" "),e("el-form-item",{attrs:{label:"拼团总人数",prop:"groupTotalNumber"}},[e("el-input",{attrs:{placeholder:"拼团总人数"},model:{value:t.dataForm.groupTotalNumber,callback:function(r){t.$set(t.dataForm,"groupTotalNumber",r)},expression:"dataForm.groupTotalNumber"}})],1)],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(r){t.visible=!1}}},[t._v("取消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(r){t.dataFormSubmit()}}},[t._v("确定")])],1)],1)},staticRenderFns:[]},i=e("46Yf")(o,a,!1,null,null,null);r.default=i.exports}});