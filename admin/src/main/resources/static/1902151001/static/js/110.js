webpackJsonp([110],{E1dn:function(a,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={data:function(){return{loading:!1,commodityOptions:[],visible:!1,dataForm:{bargainingActivityId:0,state:"",createTime:"",commodityId:"",bargainingInitialPrice:"",bargainingLowestPrice:"",bargainingParticipation:"",bargainingInterval:"",storeId:""},dataRule:{state:[{required:!0,message:"状态不能为空",trigger:"blur"}],createTime:[{required:!0,message:"创建时间不能为空",trigger:"blur"}],commodityId:[{required:!0,message:"商品id不能为空",trigger:"blur"}],bargainingInitialPrice:[{required:!0,message:"砍价初始价格不能为空",trigger:"blur"}],bargainingLowestPrice:[{required:!0,message:"砍价最低价格不能为空",trigger:"blur"}],bargainingParticipation:[{required:!0,message:"砍价参与人数不能为空",trigger:"blur"}],bargainingInterval:[{required:!0,message:"砍价区间不能为空",trigger:"blur"}]}}},methods:{commodityList:function(a){var t=this;this.$http({url:this.$http.adornUrl("/cellar/cellarcommoditydb/list"),method:"get",params:this.$http.adornParams({key:a})}).then(function(a){var i=a.data;i&&0===i.code?t.commodityOptions=i.page.list:t.$message.error(i.msg)})},changeCommodity:function(a){this.dataForm.commodityId=a;var t;t=this.commodityOptions.find(function(t){return t.commodityId===a}),this.dataForm.storeId=t.storeId},remoteMethod:function(a){var t=this;""!==a?(this.loading=!0,setTimeout(function(){t.loading=!1,t.commodityList(a)},200)):this.commodityList("")},init:function(a){var t=this;this.commodityList(),this.dataForm.bargainingActivityId=a||0,this.visible=!0,this.$nextTick(function(){t.$refs.dataForm.resetFields(),t.dataForm.bargainingActivityId&&t.$http({url:t.$http.adornUrl("/cellar/cellarbargainingactivitydb/info/"+t.dataForm.bargainingActivityId),method:"get",params:t.$http.adornParams()}).then(function(a){var i=a.data;i&&0===i.code&&(t.dataForm.state=i.cellarBargainingActivityDb.state,t.dataForm.createTime=i.cellarBargainingActivityDb.createTime,t.dataForm.commodityId=i.cellarBargainingActivityDb.commodityId,t.dataForm.storeId=i.cellarBargainingActivityDb.storeId,t.dataForm.bargainingInitialPrice=i.cellarBargainingActivityDb.bargainingInitialPrice,t.dataForm.bargainingLowestPrice=i.cellarBargainingActivityDb.bargainingLowestPrice,t.dataForm.bargainingParticipation=i.cellarBargainingActivityDb.bargainingParticipation,t.dataForm.bargainingInterval=i.cellarBargainingActivityDb.bargainingInterval)})})},dataFormSubmit:function(){var a=this;this.$refs.dataForm.validate(function(t){t&&a.$http({url:a.$http.adornUrl("/cellar/cellarbargainingactivitydb/"+(a.dataForm.bargainingActivityId?"update":"save")),method:"post",data:a.$http.adornData({bargainingActivityId:a.dataForm.bargainingActivityId||void 0,state:a.dataForm.state,createTime:a.dataForm.createTime,commodityId:a.dataForm.commodityId,storeId:a.dataForm.storeId,bargainingInitialPrice:a.dataForm.bargainingInitialPrice,bargainingLowestPrice:a.dataForm.bargainingLowestPrice,bargainingParticipation:a.dataForm.bargainingParticipation,bargainingInterval:a.dataForm.bargainingInterval})}).then(function(t){var i=t.data;i&&0===i.code?a.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){a.visible=!1,a.$emit("refreshDataList")}}):a.$message.error(i.msg)})})}}},e={render:function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("el-dialog",{attrs:{title:a.dataForm.id?"修改":"新增","close-on-click-modal":!1,visible:a.visible},on:{"update:visible":function(t){a.visible=t}}},[i("el-form",{ref:"dataForm",attrs:{model:a.dataForm,rules:a.dataRule,"label-width":"80px"},nativeOn:{keyup:function(t){if(!("button"in t)&&a._k(t.keyCode,"enter",13,t.key))return null;a.dataFormSubmit()}}},[i("el-form-item",{attrs:{label:"商品id",prop:"commodityId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{remote:"",clearable:"",filterable:"","reserve-keyword":"","remote-method":a.remoteMethod,loading:a.loading,placeholder:"请选择"},on:{change:a.changeCommodity},model:{value:a.dataForm.commodityId,callback:function(t){a.$set(a.dataForm,"commodityId",t)},expression:"dataForm.commodityId"}},a._l(a.commodityOptions,function(t){return i("el-option",{key:t.commodityId,attrs:{label:t.commodityName,value:t.commodityId}},[i("span",{staticStyle:{float:"left"}},[a._v(a._s(t.commodityName))]),a._v(" "),i("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[a._v(a._s(t.storeName))])])}))],1),a._v(" "),i("el-form-item",{attrs:{label:"砍价初始价格",prop:"bargainingInitialPrice"}},[i("el-input",{attrs:{placeholder:"砍价初始价格"},model:{value:a.dataForm.bargainingInitialPrice,callback:function(t){a.$set(a.dataForm,"bargainingInitialPrice",t)},expression:"dataForm.bargainingInitialPrice"}})],1),a._v(" "),i("el-form-item",{attrs:{label:"砍价最低价格",prop:"bargainingLowestPrice"}},[i("el-input",{attrs:{placeholder:"砍价最低价格"},model:{value:a.dataForm.bargainingLowestPrice,callback:function(t){a.$set(a.dataForm,"bargainingLowestPrice",t)},expression:"dataForm.bargainingLowestPrice"}})],1),a._v(" "),i("el-form-item",{attrs:{label:"砍价参与人数",prop:"bargainingParticipation"}},[i("el-input",{attrs:{placeholder:"砍价参与人数"},model:{value:a.dataForm.bargainingParticipation,callback:function(t){a.$set(a.dataForm,"bargainingParticipation",t)},expression:"dataForm.bargainingParticipation"}})],1)],1),a._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){a.visible=!1}}},[a._v("取消")]),a._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){a.dataFormSubmit()}}},[a._v("确定")])],1)],1)},staticRenderFns:[]},n=i("46Yf")(r,e,!1,null,null,null);t.default=n.exports}});